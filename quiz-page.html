<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa; /* Light gray background */
            padding-bottom: 70px; /* Space for fixed bottom navigation */
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        .quiz-container {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: flex-start; /* Align to top */
            align-items: center;
            padding: 1rem;
            padding-top: 2rem; /* Add some padding at the top */
        }

        .quiz-question-container {
            background-color: #ffffff;
            border-radius: 1.5rem;
            box-shadow: 0 10px 20px -5px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 600px;
            padding: 2rem;
            margin-bottom: 1.5rem;
        }

        .quiz-question {
            font-size: 1.5rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 1.5rem;
            line-height: 1.4;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 0.75rem; /* Space between options */
        }

        .quiz-option {
            background-color: #f3f4f6; /* gray-100 */
            border-radius: 0.75rem;
            padding: 1rem 1.25rem;
            font-size: 1rem;
            color: #4b5563; /* gray-700 */
            text-align: left;
            cursor: pointer;
            transition: background-color 0.2s ease, border-color 0.2s ease;
            border: 2px solid transparent;
        }

        .quiz-option:hover {
            background-color: #e5e7eb; /* gray-200 */
        }

        .quiz-option.selected {
            border-color: #8b5cf6; /* purple-600 */
            background-color: #ede9fe; /* purple-100 */
            color: #6d28d9; /* purple-800 */
            font-weight: 500;
        }

        .submit-button {
            background: linear-gradient(to right, #8b5cf6, #a78bfa); /* purple-600 to purple-400 */
            color: white;
            padding: 1rem 2.5rem;
            border-radius: 9999px; /* pill shape */
            font-size: 1.1rem;
            font-weight: 600;
            margin-top: 2rem;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            width: 90%;
            max-width: 300px;
        }

        .submit-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }

        /* Floating Chatbot Button */
        .chatbot-fab {
            position: fixed;
            bottom: 90px; /* Above the bottom navigation */
            right: 20px;
            background-color: #4f46e5; /* Indigo-600 */
            color: white;
            border-radius: 50%;
            width: 56px;
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25);
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            z-index: 1000; /* Ensure it's on top */
        }

        .chatbot-fab:hover {
            background-color: #4338ca; /* Indigo-700 */
            transform: translateY(-2px);
        }
    </style>
</head>
<body class="text-gray-800 p-4 sm:p-6 md:p-8">
    <!-- Header -->
    <header class="flex items-center justify-between mb-8">
        <button class="text-gray-600 hover:text-gray-900 focus:outline-none mr-4" onclick="history.back()">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-left"><path d="m15 18-6-6 6-6"/></svg>
        </button>
        <h1 class="text-xl font-semibold flex-grow text-center">Quiz</h1>
        <button class="text-gray-600 hover:text-yellow-500 focus:outline-none ml-4">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-star"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
        </button>
    </header>

    <!-- Quiz Content -->
    <main class="quiz-container">
        <div class="quiz-question-container">
            <p id="question-text" class="quiz-question"></p>
            <div id="options-container" class="quiz-options">
                <!-- Options will be dynamically loaded here -->
            </div>
        </div>
        <button id="submit-button" class="submit-button">Submit</button>
    </main>

    <!-- Bottom Navigation Menu -->
    <nav class="fixed bottom-0 left-0 right-0 bg-white shadow-lg rounded-t-xl py-3 px-4 flex justify-around items-center border-t border-gray-200 z-50">
        <a href="#" class="flex flex-col items-center text-gray-600 hover:text-blue-600 transition-colors duration-200">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-home"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
            <span class="text-xs mt-1">Home</span>
        </a>
        <a href="#" class="flex flex-col items-center text-blue-600 transition-colors duration-200">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-book-open"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
            <span class="text-xs mt-1">Learn</span>
        </a>
        <!-- AI Assistant Button (Central and larger) -->
        <a href="#" class="flex flex-col items-center justify-center -mt-8 bg-gradient-to-r from-purple-600 to-indigo-600 p-4 rounded-full shadow-lg text-white transform hover:scale-110 transition-all duration-300">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bot"><path d="M12 8V4H8"/><path d="M22 17c0 2.76-2.24 5-5 5H7c-2.76 0-5-2.24-5-5V7c0-2.76 2.24-5 5-5h10c2.76 0 5 2.24 5 5z"/><path d="M9 14h6"/><path d="M9 10h6"/></svg>
            <span class="text-xs mt-1">AI Assistant</span>
        </a>
        <a href="#" class="flex flex-col items-center text-gray-600 hover:text-blue-600 transition-colors duration-200">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-newspaper"><path d="M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 0 2-2V4a2 2 0 0 1 2-2h7.5L22 7.5V20a2 2 0 0 1-2 2Z"/><path d="M10 12.5h8"/><path d="M10 16.5h8"/><path d="M10 8.5h8"/></svg>
            <span class="text-xs mt-1">News</span>
        </a>
        <a href="#" class="flex flex-col items-center text-gray-600 hover:text-blue-600 transition-colors duration-200">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bar-chart-2"><path d="M18 20V10"/><path d="M12 20V4"/><path d="M6 20v-6"/></svg>
            <span class="text-xs mt-1">Statistics</span>
        </a>
    </nav>

    <!-- Floating Chatbot Button -->
    <div class="chatbot-fab">
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-message-circle"><path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"/></svg>
    </div>

    <script>
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const submitButton = document.getElementById('submit-button');

        let currentQuestionIndex = 0;
        let selectedOption = null;

        // Sample quiz data (replace with actual data fetching based on subtopicId)
        const quizData = {
            'gs1-topic1-subtopic1': [ // Example for 'Indus Valley Civilization Quiz'
                {
                    question: 'Which of the following is NOT included in the calculation of Gross Domestic Product (GDP)?',
                    options: [
                        'a) Rent earned by an Indian from property located in Canada',
                        'b) Profits earned by a Japanese company operating in India',
                        'c) Services provided by Indian citizens within India',
                        'd) Value of goods produced in India by Indian firms'
                    ],
                    correctAnswer: 'a) Rent earned by an Indian from property located in Canada'
                },
                {
                    question: 'Who was the first Governor-General of independent India?',
                    options: [
                        'a) Lord Mountbatten',
                        'b) C. Rajagopalachari',
                        'c) Jawaharlal Nehru',
                        'd) Sardar Vallabhbhai Patel'
                    ],
                    correctAnswer: 'a) Lord Mountbatten'
                },
                {
                    question: 'The term "Blue Revolution" is associated with:',
                    options: [
                        'a) Agriculture',
                        'b) Dairy farming',
                        'c) Fisheries',
                        'd) Poultry farming'
                    ],
                    correctAnswer: 'c) Fisheries'
                }
            ],
            // Add more quiz data for other subtopics as needed
        };

        function loadQuestion(index) {
            const urlParams = new URLSearchParams(window.location.search);
            const subtopicId = urlParams.get('subtopicId');
            const currentQuiz = quizData[subtopicId];

            if (!currentQuiz || index >= currentQuiz.length || index < 0) {
                questionText.textContent = "Quiz completed or no questions available.";
                optionsContainer.innerHTML = '';
                submitButton.style.display = 'none';
                return;
            }

            const question = currentQuiz[index];
            questionText.textContent = question.question;
            optionsContainer.innerHTML = ''; // Clear previous options
            selectedOption = null; // Reset selected option

            question.options.forEach((option, i) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'quiz-option';
                optionDiv.textContent = option;
                optionDiv.addEventListener('click', () => selectOption(optionDiv, option));
                optionsContainer.appendChild(optionDiv);
            });
        }

        function selectOption(element, optionValue) {
            // Remove 'selected' class from all options
            document.querySelectorAll('.quiz-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            // Add 'selected' class to the clicked option
            element.classList.add('selected');
            selectedOption = optionValue;
        }

        submitButton.addEventListener('click', () => {
            if (selectedOption) {
                const urlParams = new URLSearchParams(window.location.search);
                const subtopicId = urlParams.get('subtopicId');
                const currentQuiz = quizData[subtopicId];
                const currentQuestion = currentQuiz[currentQuestionIndex];

                if (selectedOption === currentQuestion.correctAnswer) {
                    alert('Correct Answer!');
                } else {
                    alert(`Wrong Answer. Correct is: ${currentQuestion.correctAnswer}`);
                }
                // Move to the next question
                currentQuestionIndex++;
                loadQuestion(currentQuestionIndex);
            } else {
                alert('Please select an option before submitting.');
            }
        });

        // Initial load of the first question
        window.onload = () => {
            const urlParams = new URLSearchParams(window.location.search);
            const subtopicId = urlParams.get('subtopicId');
            if (subtopicId && quizData[subtopicId]) {
                loadQuestion(currentQuestionIndex);
            } else {
                questionText.textContent = "No quiz found for this subtopic.";
                submitButton.style.display = 'none';
            }
        };
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flashcards</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa; /* Light gray background */
            padding-bottom: 70px; /* Space for fixed bottom navigation */
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        .flashcard-container {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 1rem;
        }

        .flashcard-counter {
            font-size: 1rem;
            color: #6b7280; /* gray-500 */
            margin-bottom: 1rem;
        }

        .flashcard-card {
            position: relative;
            width: 90%; /* Responsive width */
            max-width: 380px; /* Max width for larger screens */
            height: 450px; /* Fixed height for consistency */
            border-radius: 1.5rem;
            box-shadow: 0 15px 30px -5px rgba(0, 0, 0, 0.2), 0 8px 15px -5px rgba(0, 0, 0, 0.1);
            transform-style: preserve-3d;
            transition: transform 0.6s ease-in-out;
            /* Removed cursor: pointer from here as flip is now specific to text */
            perspective: 1000px; /* For 3D flip effect */
        }

        .flashcard-card.flipped {
            transform: rotateY(180deg);
        }

        .flashcard-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 1.5rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            color: white;
            font-weight: bold;
            background: linear-gradient(135deg, #4f46e5, #8b5cf6); /* Default gradient */
        }

        .flashcard-back {
            transform: rotateY(180deg);
            background: linear-gradient(135deg, #8b5cf6, #4f46e5); /* Reversed gradient or different color */
        }

        .flashcard-question {
            font-size: 1.8rem;
            line-height: 1.4;
            margin-bottom: 1.5rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }

        .flashcard-answer {
            font-size: 1.8rem;
            line-height: 1.4;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }

        .tap-to-reveal {
            font-size: 0.9rem;
            opacity: 0.7;
            margin-top: 1rem;
            cursor: pointer; /* Added cursor for clickability */
        }

        .flashcard-navigation {
            display: flex;
            justify-content: space-between;
            width: 90%;
            max-width: 380px;
            margin-top: 1.5rem;
        }

        .nav-button {
            background-color: #6b7280; /* gray-500 */
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 500;
            transition: background-color 0.3s ease;
        }

        .nav-button:hover:not(:disabled) {
            background-color: #4b5563; /* gray-700 */
        }

        .nav-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .rating-section {
            margin-top: 2rem;
            text-align: center;
            width: 100%;
            max-width: 400px;
            display: none; /* Hidden by default */
        }

        .rating-buttons {
            display: flex;
            justify-content: space-around;
            margin-top: 1rem;
        }

        .rating-button {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background-color: #c4b5fd; /* purple-300 */
            color: white;
            font-size: 1.2rem;
            font-weight: bold;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .rating-button:hover {
            background-color: #a78bfa; /* purple-400 */
            transform: translateY(-2px);
        }
        .rating-button.selected {
            background-color: #8b5cf6; /* purple-600 */
            transform: scale(1.1);
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }

        /* Floating Chatbot Button */
        .chatbot-fab {
            position: fixed;
            bottom: 90px; /* Above the bottom navigation */
            right: 20px;
            background-color: #4f46e5; /* Indigo-600 */
            color: white;
            border-radius: 50%;
            width: 56px;
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25);
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            z-index: 1000; /* Ensure it's on top */
        }

        .chatbot-fab:hover {
            background-color: #4338ca; /* Indigo-700 */
            transform: translateY(-2px);
        }
    </style>
</head>
<body class="text-gray-800 p-4 sm:p-6 md:p-8">
    <!-- Header -->
    <header class="flex items-center justify-start mb-8">
        <button class="text-gray-600 hover:text-gray-900 focus:outline-none mr-4" onclick="history.back()">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-left"><path d="m15 18-6-6 6-6"/></svg>
        </button>
        <h1 class="text-xl font-semibold flex-grow text-center">Flashcards</h1>
        <div class="w-8"></div> <!-- Spacer to balance header -->
    </header>

    <!-- Flashcard Content -->
    <main class="flashcard-container">
        <div id="flashcard-counter" class="flashcard-counter"></div>
        <div id="flashcard-card" class="flashcard-card">
            <div class="flashcard-inner">
                <div class="flashcard-front">
                    <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-lightbulb text-white opacity-70 mb-4"><path d="M15 14c.2-.8 1-1.5 2-2 2.3-2.3 6-4.1 6-7A2 2 0 0 0 20 3c-3.3 0-5 1.7-6 4L8.7 12.1c-.2.2-.5.3-.7.3H4a2 2 0 0 0-2 2v2c0 1.1.9 2 2 2h2c1.1 0 2 .9 2 2v2c0 1.1.9 2 2 2h2a2 2 0 0 0 2-2v-2c0-.2-.1-.5-.3-.7Z"/></svg>
                    <p id="flashcard-question" class="flashcard-question"></p>
                    <span id="tap-to-reveal" class="tap-to-reveal">Tap to reveal answer</span>
                </div>
                <div class="flashcard-back">
                    <p id="flashcard-answer" class="flashcard-answer"></p>
                </div>
            </div>
        </div>
        <div class="flashcard-navigation">
            <button id="prev-button" class="nav-button" disabled>Previous</button>
            <button id="next-button" class="nav-button">Next</button>
        </div>

        <!-- Rating Section -->
        <div id="rating-section" class="rating-section">
            <h3 class="text-lg font-semibold text-gray-700">How well did you know this?</h3>
            <div class="rating-buttons">
                <button class="rating-button" data-rating="1">1</button>
                <button class="rating-button" data-rating="2">2</button>
                <button class="rating-button" data-rating="3">3</button>
                <button class="rating-button" data-rating="4">4</button>
                <button class="rating-button" data-rating="5">5</button>
            </div>
            <div class="flex justify-between text-sm text-gray-500 mt-2">
                <span>Not at all</span>
                <span>Perfectly</span>
            </div>
        </div>
    </main>

    <!-- Bottom Navigation Menu -->
    <nav class="fixed bottom-0 left-0 right-0 bg-white shadow-lg rounded-t-xl py-3 px-4 flex justify-around items-center border-t border-gray-200 z-50">
        <a href="#" class="flex flex-col items-center text-gray-600 hover:text-blue-600 transition-colors duration-200">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-home"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
            <span class="text-xs mt-1">Home</span>
        </a>
        <a href="#" class="flex flex-col items-center text-blue-600 transition-colors duration-200">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-book-open"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
            <span class="text-xs mt-1">Learn</span>
        </a>
        <!-- AI Assistant Button (Central and larger) -->
        <a href="#" class="flex flex-col items-center justify-center -mt-8 bg-gradient-to-r from-purple-600 to-indigo-600 p-4 rounded-full shadow-lg text-white transform hover:scale-110 transition-all duration-300">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bot"><path d="M12 8V4H8"/><path d="M22 17c0 2.76-2.24 5-5 5H7c-2.76 0-5-2.24-5-5V7c0-2.76 2.24-5 5-5h10c2.76 0 5 2.24 5 5z"/><path d="M9 14h6"/><path d="M9 10h6"/></svg>
            <span class="text-xs mt-1">AI Assistant</span>
        </a>
        <a href="#" class="flex flex-col items-center text-gray-600 hover:text-blue-600 transition-colors duration-200">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-newspaper"><path d="M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 0 2-2V4a2 2 0 0 1 2-2h7.5L22 7.5V20a2 2 0 0 1-2 2Z"/><path d="M10 12.5h8"/><path d="M10 16.5h8"/><path d="M10 8.5h8"/></svg>
            <span class="text-xs mt-1">News</span>
        </a>
        <a href="#" class="flex flex-col items-center text-gray-600 hover:text-blue-600 transition-colors duration-200">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bar-chart-2"><path d="M18 20V10"/><path d="M12 20V4"/><path d="M6 20v-6"/></svg>
            <span class="text-xs mt-1">Statistics</span>
        </a>
    </nav>

    <!-- Floating Chatbot Button -->
    <div class="chatbot-fab">
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-message-circle"><path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"/></svg>
    </div>

    <script>
        const flashcardCard = document.getElementById('flashcard-card');
        const flashcardInner = flashcardCard.querySelector('.flashcard-inner');
        const flashcardQuestion = document.getElementById('flashcard-question');
        const flashcardAnswer = document.getElementById('flashcard-answer');
        const flashcardCounter = document.getElementById('flashcard-counter');
        const prevButton = document.getElementById('prev-button');
        const nextButton = document.getElementById('next-button');
        const ratingSection = document.getElementById('rating-section');
        const ratingButtons = document.querySelectorAll('.rating-button');
        const tapToReveal = document.getElementById('tap-to-reveal'); // Get the tap to reveal element

        let currentFlashcardIndex = 0;
        let flashcardsData = []; // This will be populated based on URL parameters

        // Sample data for flashcards (replace with actual data fetching logic)
        const allFlashcardsContent = {
            'gs1-topic1-subtopic1': [ // Corresponds to 'Indian Polity'
                { question: '73rd Amendment mandates "__"-tier Panchayati Raj system.', answer: 'Three-tier (Village, Block, District).' },
                { question: 'Which article deals with the election of the President of India?', answer: 'Article 54' },
                { question: 'The concept of "Directive Principles of State Policy" is borrowed from the constitution of which country?', answer: 'Ireland' },
                { question: 'Who is the ex-officio Chairman of the Rajya Sabha?', answer: 'The Vice-President of India' },
                { question: 'What is the minimum age to be eligible for election as President of India?', answer: '35 years' },
                { question: 'Which amendment reduced the voting age from 21 to 18 years?', answer: '61st Amendment Act, 1989' },
                { question: 'The power to create a new state in India rests with the?', answer: 'Parliament' },
                { question: 'Who appoints the Chief Election Commissioner of India?', answer: 'The President of India' },
                { question: 'The term of office of the Vice-President of India is?', answer: '5 years' },
                { question: 'Which schedule of the Indian Constitution deals with the distribution of powers between the Union and States?', answer: 'Seventh Schedule' },
                { question: 'The idea of "concurrent list" in the Indian Constitution is taken from the Constitution of?', answer: 'Australia' },
                { question: 'Who is the legal advisor to the Government of India?', answer: 'Attorney General of India' }
            ],
            // Add more subtopic flashcards here
        };

        function loadFlashcards() {
            const urlParams = new URLSearchParams(window.location.search);
            const subtopicId = urlParams.get('subtopicId');

            if (subtopicId && allFlashcardsContent[subtopicId]) {
                flashcardsData = allFlashcardsContent[subtopicId];
                displayFlashcard(currentFlashcardIndex);
            } else {
                flashcardQuestion.textContent = "No flashcards found for this subtopic.";
                flashcardAnswer.textContent = "";
                // No need to remove click listener from flashcardCard as it's not directly attached anymore
                prevButton.disabled = true;
                nextButton.disabled = true;
            }
        }

        function displayFlashcard(index) {
            if (index >= 0 && index < flashcardsData.length) {
                const card = flashcardsData[index];
                flashcardQuestion.innerHTML = card.question; // Use innerHTML for potential formatting
                flashcardAnswer.innerHTML = card.answer; // Use innerHTML for potential formatting
                flashcardCounter.textContent = `${index + 1} out of ${flashcardsData.length}`;
                
                // Reset card flip state and hide rating section
                flashcardCard.classList.remove('flipped');
                ratingSection.style.display = 'none';
                ratingButtons.forEach(button => button.classList.remove('selected')); // Deselect any previously selected rating

                // Update navigation buttons
                prevButton.disabled = (index === 0);
                nextButton.disabled = (index === flashcardsData.length - 1);
            }
        }

        function flipCard() {
            flashcardCard.classList.toggle('flipped');
            // Show rating section only when the card is flipped to the answer side
            if (flashcardCard.classList.contains('flipped')) {
                ratingSection.style.display = 'block';
            } else {
                ratingSection.style.display = 'none';
            }
        }

        function showNextFlashcard() {
            if (currentFlashcardIndex < flashcardsData.length - 1) {
                currentFlashcardIndex++;
                displayFlashcard(currentFlashcardIndex);
            }
        }

        function showPrevFlashcard() {
            if (currentFlashcardIndex > 0) {
                currentFlashcardIndex--;
                displayFlashcard(currentFlashcardIndex);
            }
        }

        // Add event listeners for rating buttons
        ratingButtons.forEach(button => {
            button.addEventListener('click', () => {
                // Remove 'selected' class from all buttons
                ratingButtons.forEach(btn => btn.classList.remove('selected'));
                // Add 'selected' class to the clicked button
                button.classList.add('selected');
                // You can now capture the rating (e.g., button.dataset.rating) and send it to a backend or store it.
                console.log('Rated:', button.dataset.rating);
            });
        });

        // Event Listener for "Tap to reveal answer"
        tapToReveal.addEventListener('click', flipCard);
        nextButton.addEventListener('click', showNextFlashcard);
        prevButton.addEventListener('click', showPrevFlashcard);

        // Initial load
        window.onload = loadFlashcards;
    </script>
</body>
</html>

